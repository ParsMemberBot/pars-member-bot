import random
from bot.utils import send_message, chatgpt_response  # ✅ مسیر صحیح

jokes = [
    "🤣 چرا برنامه‌نویسا هیچ‌وقت گم نمی‌شن؟ چون همیشه یه مسیر برگشتی دارن!",
    "😆 طرف رفته پیش روانشناس، گفته چرا با پایتون خواب می‌بینم؟ گفته چون async داری!",
    "😂 فرق مهندس کامپیوتر با جادوگر چیه؟ جادوگر جادو می‌کنه، مهندس باگ می‌گیره!",
    "🤓 چرا برنامه‌نویسا همیشه تنها هستن؟ چون به جای معاشرت، دیباگ می‌کنن!",
    "🧠 هوش مصنوعی گفت: من از تو باهوش‌ترم. منم گفتم: ولی من می‌تونم کابلتو بکشم!",
    "💻 چرا برنامه‌نویس سر جلسه امتحان خوابش می‌بره؟ چون سوال‌ها الگوریتم ندارن!",
    "🐛 باگ گفت: من اینجام تا زندگی‌تو جهنم کنم. برنامه‌نویس گفت: سلام رئیس!",
    "☕ برنامه‌نویس بدون قهوه یعنی ماشین بدون بنزین!",
    "📱 چرا گوشی برنامه‌نویسا کند میشه؟ چون همه‌چیزو با کد حل می‌کنن حتی تماس تلفنی!",
    "🤯 چرا برنامه‌نویس گریه می‌کرد؟ چون کامنت کدشو پاک کرده بودن!",
    "📟 پایتون گفت به جاوا: من کمتر حرف می‌زنم، بیشتر کار می‌کنم!",
    "🧑‍💻 برنامه‌نویس گفت: من خواب نمی‌بینم، فقط در استک‌اورفلو زندگی می‌کنم!",
    "📊 الگوریتم جدیدم انقدر خوبه که حتی مامانم هم فهمید!",
    "⚠️ می‌دونی بدترین ارور چیه؟ اروری که هیچ‌وقت تکرار نمیشه ولی وجود داره!",
    "📂 برنامه‌نویس همیشه دو چیزو فراموش می‌کنه: پسورد و جایی که پسورد رو ذخیره کرده!",
    "🕹️ کد من کار می‌کرد، تا اینکه یه نفر اومد و گفت چرا کار می‌کنه؟",
    "🎮 چرا برنامه‌نویسا گیم زیاد بازی می‌کنن؟ چون عادت دارن با باگ زندگی کنن!",
    "🖥️ فقط برنامه‌نویسا می‌فهمن فرق بین = و == چقد مهمه!",
    "🔧 برنامه‌نویس گفت: کدم کار می‌کنه، فقط گاهی اوقات نمی‌فهمه چرا!",
    "🔄 دیباگ یعنی: حرف زدن با خودت تا بفهمی چی نوشتی!"
]

fortunes = [
    "🔮 آینده روشنی در انتظارت هست.",
    "💫 به زودی خبری خوشحال‌کننده می‌رسه.",
    "🌟 نیت کن... بهش می‌رسی اگر تلاش کنی.",
    "🍀 شانس در خونه‌ت رو می‌زنه. دریابش!",
    "✨ تو توانایی رسیدن به هر چیزی رو داری.",
    "🧲 انرژی مثبتی دورتو گرفته، ازش استفاده کن.",
    "🪄 امروز روز توئه! ازش استفاده کن.",
    "🌈 مسیر جدیدی در زندگی‌ت باز خواهد شد.",
    "🎯 تمرکز کن، موفقیت نزدیکه.",
    "🌻 دل کسی رو شاد کن، خوشبختی میاد سمتت."
]

def handle_fun_commands(message):
    text = message.get("text", "")
    user_id = message["from"]["id"]
    chat_id = message["chat"]["id"]

    if text == "جوک":
        joke = random.choice(jokes)
        send_message(chat_id, joke)

    elif text == "فال":
        fortune = random.choice(fortunes)
        send_message(chat_id, fortune)

    elif text.startswith("/ai") or text.startswith("هوش مصنوعی") or text.startswith("ربات"):
        prompt = text.replace("/ai", "").replace("هوش مصنوعی", "").replace("ربات", "").strip()
        if not prompt:
            send_message(chat_id, "❗️لطفاً بعد از دستور، سوال یا متن خود را بنویسید.")
        else:
            response = chatgpt_response(prompt)
            send_message(chat_id, response)
